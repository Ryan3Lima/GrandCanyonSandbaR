check()
library(devtools)
check()
document()
document()
library(devtools)
install_github("Ryan3Lima/GrandCanyonSandbaR")
install_github("Ryan3Lima/GrandCanyonSandbaR")
library(GrandCanyonSandbaR)
grid <- GenerateEquallySpacedStageDischarge('2201R') # Assumes '2201R' is a valid site in SandbarSites
discharge_info <- find_Q_from_WSE('2201R', grid, 400.002) # Assumes '2201R' is a valid site and grid is defined
#'
#' Checks if the provided site name is valid by verifying its presence in the `SandbarSites` dataset.
#'
#' @param sitename A character string of the site name to validate.
#' @return None; this function stops execution with an error message if the site name is invalid.
#' @examples
#' \dontrun{
#'   validSite("0034L") # Assumes "0034L" is a valid site in SandbarSites
#' }
#' @export
validSite <- function(sitename){
if(!sitename %in% SandbarSites) {
stop("Invalid sitename")
}
}
validSite('0307R')
#'
#' Checks if the provided site name is valid by verifying its presence in the `SandbarSites` dataset.
#'
#' @param sitename A character string of the site name to validate.
#' @return None; this function stops execution with an error message if the site name is invalid.
#' @examples
#' \dontrun{
#'   validSite("0034L") # Assumes "0034L" is a valid site in SandbarSites
#' }
#' @export
validSite <- function(sitename){
if(!sitename %in% SandbarSites) {
stop("Invalid sitename")
}
message("Valid sitename")
}
validSite('0307R')
#'
#' Fits a generalized power law model to stage-discharge data for a specified sandbar site using the `bdrc` package.
#'
#' @param sitename A character string specifying the name of the sandbar site.
#' @return An object of class `gplm` containing the fitted model.
#' @examples
#' \dontrun{
#'   model <- fitGeneralizedPowerLawModel('0307R') # Assumes '0307R' is a valid site in SandbarSites
#' }
#' @export
fitGeneralizedPowerLawModel <- function(sitename){
validSite(sitename) # Ensure site is valid
index <- which(SandbarSites == sitename)
df <- StageDischargeData[[index]]
df <- as.data.frame(df)
message('Using Package bdrc -- Bayesian Discharge Rating Curve')
message(paste0("Using bdrc::gplm.fit to fit a generalized power law model for stage-discharge at: ", sitename, ' Sandbar'))
message("This may take a few moments")
gplm.fit <- bdrc::gplm(Q ~ W, data = df, parallel = TRUE, num_cores = 2)
message("Plotting Rating Curve")
graphics::plot(gplm.fit)
return(gplm.fit)
}
fitGeneralizedPowerLawModel('0307R')
